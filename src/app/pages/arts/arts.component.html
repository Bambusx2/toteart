<section class="arts-page">
  <div class="container">
    <header class="arts-page__header">
      <h1 class="arts-page__title">{{ languageService.t.arts.title }}</h1>
      <p class="arts-page__subtitle">{{ languageService.t.arts.subtitle }}</p>
    </header>

    <div class="masonry-grid">
      @for (artwork of artworks; track artwork.id; let i = $index) {
        <article
          class="masonry-item"
          (click)="openLightbox(artwork, i)"
          role="button"
          tabindex="0"
          (keydown.enter)="openLightbox(artwork, i)"
          (keydown.space)="openLightbox(artwork, i)"
        >
          <div class="masonry-item__image-wrapper">
            <img
              [src]="artwork.imageSrcset?.medium || artwork.imageUrl"
              [srcset]="artwork.imageSrcset ?
                artwork.imageSrcset.thumb + ' 400w, ' +
                artwork.imageSrcset.medium + ' 800w, ' +
                artwork.imageSrcset.large + ' 1200w' :
                ''"
              sizes="(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw"
              [alt]="artwork.imageAlt"
              class="masonry-item__image"
              [loading]="i < 6 ? 'eager' : 'lazy'"
              [attr.fetchpriority]="i < 3 ? 'high' : 'auto'"
              decoding="async"
            />
            <div class="masonry-item__overlay">
              <div class="masonry-item__content">
                <h2 class="masonry-item__title">{{ getTitle(artwork) }}</h2>
                <p class="masonry-item__meta">{{ artwork.year }} Â· {{ getMedium(artwork) }}</p>
                <div class="masonry-item__action">
                  <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="11" cy="11" r="8"></circle>
                    <path d="m21 21-4.35-4.35"></path>
                    <line x1="11" y1="8" x2="11" y2="14"></line>
                    <line x1="8" y1="11" x2="14" y2="11"></line>
                  </svg>
                  <span>{{ languageService.t.arts.viewFullSize }}</span>
                </div>
              </div>
            </div>
          </div>
        </article>
      }
    </div>
  </div>
</section>

<app-lightbox
  [artwork]="selectedArtwork()"
  [isOpen]="isLightboxOpen()"
  (close)="closeLightbox()"
  (next)="showNext()"
  (previous)="showPrevious()"
/>
